# For Raspbian and PiHole

sudo apt update
sudo apt install hostapd iptables-persistent -y

sudo nano /etc//netplan...
  ethernets:
    wlan0:
      dhcp4: false
      dhcp6: false
      addresses:
      - 192.168.4.1/24

sudo nano /etc/dhcpcd.conf
interface wlan0
    static ip_address=192.168.4.1/24
    nohook wpa_supplicant

sudo systemctl daemon-reload
sudo service dhcpcd restart

sudo nano /etc/hostapd/hostapd.conf

interface=wlan0
driver=nl80211
hw_mode=g
channel=7
wmm_enabled=0
macaddr_acl=0
auth_algs=1
ignore_broadcast_ssid=0
wpa=2
wpa_key_mgmt=WPA-PSK
wpa_pairwise=TKIP
rsn_pairwise=CCMP
ssid=NAME_HERE
wpa_passphrase=PASSWORD_HERE

#ht_capab=[HT40][SHORT-GI-20][DSSS_CCK-40]

sudo nano /etc/rc.local
ifconfig wlan0 192.168.4.1
systemctl restart hostapd

sudo systemctl unmask hostapd; sudo systemctl enable hostapd; sudo systemctl start hostapd

# RUN EVERYTHING, OR THESE:

sudo iptables -F; sudo iptables -X
sudo iptables -A OUTPUT -j ACCEPT -m comment --comment "Accept all outgoing"
sudo iptables -A INPUT -j ACCEPT -m comment --comment "Accept all incoming"
sudo iptables -A FORWARD -j ACCEPT -m comment --comment "Accept all forwarded"

# PERMANENT?

sudo sh -c "iptables-save > /etc/iptables.ipv4.nat"
sudo nano /etc/rc.local, add:
iptables-restore < /etc/iptables.ipv4.nat

reboot


DEPRECATED!
#sudo nano /etc/default/hostapd
#DAEMON_CONF="/etc/hostapd/hostapd.conf"
sudo chmod 600 /etc/hostapd/hostapd.conf
sudo ifconfig wlan0 192.168.4.1
